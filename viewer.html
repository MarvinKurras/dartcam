<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DartCam ¬∑ Viewer</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <main class="page">

    <a href="index.html" class="back-link">‚Üê Back</a>

    <div class="logo">
      <h1 class="logo-title">DART<span>CAM</span></h1>
      <p class="logo-sub">Viewer Mode</p>
    </div>

    <div class="card">
      <p class="card-title">üñ•Ô∏è Connect to Camera</p>

      <div class="status">
        <div class="status-dot" id="status-dot"></div>
        <span id="status-text">Enter the room code from your iPhone</span>
      </div>

      <div class="input-group">
        <label class="input-label" for="code-input">Room Code</label>
        <input
          id="code-input"
          class="input"
          type="text"
          placeholder="DART-XXXX"
          maxlength="9"
          autocomplete="off"
          spellcheck="false"
        />
      </div>

      <button class="btn btn-success" id="connect-btn">
        Connect
      </button>
    </div>

    <!-- Video stream -->
    <div class="video-wrapper">
      <div id="video-overlay" class="video-overlay">
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/>
        </svg>
        Waiting for stream‚Ä¶
      </div>
      <video
        id="stream"
        autoplay
        playsinline
        hidden
        style="width:100%; height:100%; object-fit:contain;"
      ></video>
    </div>

    <!-- Detect button -->
    <div id="detect-wrap" class="detect-wrap">
      <button class="btn btn-primary" id="detect-btn">Darts erkennen</button>
      <p class="hint" id="detect-status"></p>
    </div>

    <!-- Dartboard (always visible) -->
    <div class="dartboard-section">
      <div class="results-col">
        <p class="card-title">Dartboard</p>
        <canvas id="dartboard-canvas" class="dartboard-canvas" width="320" height="320"></canvas>
        <div id="score-list" class="score-list"></div>
      </div>
    </div>

    <!-- Frame with bounding boxes (shown after a detection run) -->
    <div id="results-section" class="results-section" style="display:none;">
      <div class="results-col">
        <p class="card-title">Erkannter Frame</p>
        <canvas id="frame-canvas" class="frame-canvas"></canvas>
      </div>
    </div>

  </main>

  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/inferencejs"></script>
  <script src="js/config.js"></script>
  <script src="js/detect.js"></script>
  <script src="js/viewer.js"></script>
</body>
</html>
